import { BossGameConfig, GameMeters } from '@/types/boss-game';

export const pandasFirstPaycheckGame: BossGameConfig = {
  id: 'pandas-first-paycheck',
  moduleId: 'income',
  title: "Panda's First Paycheck",
  subtitle: 'Interactive Story Simulator',
  description: 'You are a young panda starting your first job in Bamboo City. Your goal is not to finish rich. Your goal is to end with momentum.',
  totalMonths: 6,
  initialMeters: {
    income: 30,
    hourlyValue: 20,
    energy: 80,
    replaceability: 80,
    optionality: 20,
  },
  months: [
    // MONTH 1
    {
      month: 1,
      title: 'First Steps',
      openingNarration: `You land your first job rolling bamboo crates at the Bamboo Market. Pay is low. Hours are fixed. Energy drains fast.

The city map shows locked paths. Some glow faintly. Some are hidden.

A message appears: "Every panda earns. Few pandas advance."`,
      decisions: [
        {
          id: 'm1-work',
          category: 'work',
          title: 'Your First Week',
          description: 'The manager posts the shift schedule. You see openings for extra hours.',
          pandaDialogue: 'More hours means more bamboo coins... right?',
          options: [
            {
              id: 'standard-shifts',
              label: 'Take standard shifts only',
              description: '40 hours, steady pace',
              meterChanges: { income: 5, energy: -10, replaceability: 0 },
              storyResponse: 'You finish each day with energy to spare. Other pandas notice you move quickly in the mornings.',
            },
            {
              id: 'extra-shifts',
              label: 'Take all available extra shifts',
              description: '55 hours, more pay',
              meterChanges: { income: 15, energy: -30, replaceability: 0 },
              storyResponse: 'Your bamboo coin stack grows. But by week\'s end, you\'re dropping crates. The senior panda frowns.',
            },
            {
              id: 'moderate-extra',
              label: 'Take one extra shift',
              description: '45 hours, balanced',
              meterChanges: { income: 8, energy: -15, replaceability: 0 },
              storyResponse: 'A small boost without the exhaustion. You have time to watch how the senior pandas work.',
            },
          ],
        },
        {
          id: 'm1-skill',
          category: 'skill',
          title: 'Task Options',
          description: 'You notice different jobs around the market. Rolling is easy, but other tasks catch your eye.',
          options: [
            {
              id: 'keep-rolling',
              label: 'Stick with rolling crates',
              description: 'Safe and predictable',
              meterChanges: { replaceability: 5, hourlyValue: 0 },
              storyResponse: 'Rolling is automatic now. You could do it in your sleep. So could any new panda.',
            },
            {
              id: 'learn-inventory',
              label: 'Ask to learn inventory tracking',
              description: 'Harder, but fewer pandas know it',
              meterChanges: { replaceability: -15, hourlyValue: 5, energy: -10 },
              storyResponse: 'The numbers are tricky at first. But the manager starts checking in with you directly.',
              unlocks: ['inventory-skill'],
            },
            {
              id: 'watch-coordination',
              label: 'Observe the coordination pandas',
              description: 'Just watching for now',
              meterChanges: { replaceability: -5, optionality: 5 },
              storyResponse: 'You notice how they direct traffic without rolling anything. They work less but earn more.',
              unlocks: ['coordination-awareness'],
            },
          ],
        },
        {
          id: 'm1-money',
          category: 'money',
          title: 'First Paycheck',
          description: 'Your first bamboo coins arrive. Your small hut could use some upgrades.',
          pandaDialogue: 'Finally! Real money in my paws...',
          options: [
            {
              id: 'spend-comfort',
              label: 'Upgrade your sleeping mat',
              description: 'Better rest, feels rewarding',
              meterChanges: { energy: 10, optionality: -5 },
              storyResponse: 'The new mat is amazing. You sleep deeper. But the coins are gone.',
            },
            {
              id: 'save-half',
              label: 'Save half, spend half',
              description: 'Balance comfort and future',
              meterChanges: { optionality: 5 },
              storyResponse: 'A small treat and a small pile saved. Neither feels dramatic, but both feel right.',
              unlocks: ['savings-started'],
            },
            {
              id: 'save-all',
              label: 'Save everything',
              description: 'Maximum runway building',
              meterChanges: { optionality: 15, energy: -5 },
              storyResponse: 'Your hut stays bare. But a growing pile of coins glows in the corner.',
              unlocks: ['savings-started', 'frugal-path'],
            },
          ],
        },
      ],
      closingNarration: 'Month 1 ends. The city lights flicker. Other pandas head home. You look at your paws—tired but learning.',
    },
    // MONTH 2
    {
      month: 2,
      title: 'Finding Your Rhythm',
      openingNarration: 'The market feels familiar now. You know where the heavy crates go. You recognize the regulars. But something itches—you\'re starting to see the ceiling.',
      decisions: [
        {
          id: 'm2-work',
          category: 'work',
          title: 'The Overtime Question',
          description: 'A big shipment arrives. Everyone is asked to stay late all week.',
          options: [
            {
              id: 'full-overtime',
              label: 'Work every overtime hour',
              description: 'Maximum coins this week',
              meterChanges: { income: 20, energy: -35, replaceability: 5 },
              storyResponse: 'Your coin stack is thick. Your eyes are heavy. Mistakes start creeping in by day four.',
            },
            {
              id: 'selective-overtime',
              label: 'Work overtime three days',
              description: 'Good money, some rest',
              meterChanges: { income: 12, energy: -20 },
              storyResponse: 'You earn well and still have energy to think. The manager notices your consistency.',
            },
            {
              id: 'skip-overtime',
              label: 'Skip overtime entirely',
              description: 'Protect your energy',
              meterChanges: { income: 0, energy: 10, replaceability: 5 },
              storyResponse: 'Other pandas grumble about the load. But you feel sharp when Monday comes.',
            },
          ],
        },
        {
          id: 'm2-skill',
          category: 'skill',
          title: 'A New Task Appears',
          description: 'The customer service counter needs help. It requires dealing with difficult pandas.',
          options: [
            {
              id: 'try-service',
              label: 'Volunteer for customer service',
              description: 'Stressful but visible',
              meterChanges: { replaceability: -20, hourlyValue: 10, energy: -15 },
              storyResponse: 'Angry customers are exhausting. But solving their problems feels powerful. The manager watches.',
              unlocks: ['customer-skill'],
            },
            {
              id: 'avoid-service',
              label: 'Stay in the back',
              description: 'Comfortable, invisible',
              meterChanges: { replaceability: 5, energy: 5 },
              storyResponse: 'The crates don\'t complain. But you notice the service pandas getting praised.',
            },
          ],
        },
        {
          id: 'm2-negotiation',
          category: 'negotiation',
          title: 'A Quiet Moment',
          description: 'The manager pauses near you after a busy rush. They seem pleased.',
          pandaDialogue: 'Is this the moment? Do I say something?',
          options: [
            {
              id: 'ask-raise',
              label: 'Ask about a raise',
              description: 'Strike while the iron is warm',
              meterChanges: { hourlyValue: 0, replaceability: 5 },
              storyResponse: 'The manager looks surprised. "You\'ve been here one month." The moment passes awkwardly.',
            },
            {
              id: 'mention-growth',
              label: 'Mention you want to grow here',
              description: 'Plant a seed',
              meterChanges: { optionality: 10 },
              storyResponse: 'The manager nods. "Good to know. Let\'s see how you handle the next few months."',
              unlocks: ['manager-noticed'],
            },
            {
              id: 'stay-quiet',
              label: 'Say nothing, keep working',
              description: 'Wait for a better moment',
              meterChanges: {},
              storyResponse: 'The manager moves on. The moment dissolves. Maybe next time.',
            },
          ],
        },
        {
          id: 'm2-money',
          category: 'money',
          title: 'Paycheck Arrives',
          description: 'Your second paycheck. A friend invites you to a new bamboo restaurant.',
          options: [
            {
              id: 'restaurant-splurge',
              label: 'Treat yourself at the restaurant',
              description: 'You earned this',
              meterChanges: { energy: 10, optionality: -10 },
              storyResponse: 'The bamboo is delicious. Your friend is happy. Your savings pile doesn\'t grow.',
            },
            {
              id: 'cook-home',
              label: 'Cook at home, save the rest',
              description: 'Delayed gratification',
              meterChanges: { optionality: 10 },
              storyResponse: 'The meal is simpler. But your coin pile grows heavier.',
              unlocks: ['savings-growing'],
            },
            {
              id: 'invest-skill',
              label: 'Buy a book on market operations',
              description: 'Invest in knowledge',
              meterChanges: { hourlyValue: 5, optionality: 5, replaceability: -10 },
              storyResponse: 'The book is dense. But patterns start clicking. You see the market differently now.',
              unlocks: ['market-knowledge'],
            },
          ],
        },
      ],
      closingNarration: 'Month 2 closes. The city map flickers. Some paths glow brighter now. You\'re learning how the game is played.',
    },
    // MONTH 3
    {
      month: 3,
      title: 'Crossroads',
      openingNarration: 'Three months in. You\'re no longer the newest panda. Fresh faces arrive, doing the work you used to do. The question hangs: are you moving forward or standing still?',
      decisions: [
        {
          id: 'm3-work',
          category: 'work',
          title: 'The Burnout Signs',
          description: 'You\'ve been pushing hard. Small mistakes keep appearing. Your body aches.',
          options: [
            {
              id: 'push-through',
              label: 'Push through the fatigue',
              description: 'Pain is temporary',
              meterChanges: { income: 10, energy: -30, hourlyValue: -10 },
              storyResponse: 'You keep going. But the manager notices errors. "You okay?" they ask. You nod, unconvincingly.',
            },
            {
              id: 'request-lighter',
              label: 'Request a lighter week',
              description: 'Recover before breaking',
              meterChanges: { income: -5, energy: 25 },
              storyResponse: 'The break feels luxurious. Monday comes and you\'re sharp again. The quality shows.',
              unlocks: ['sustainable-pace'],
            },
            {
              id: 'strategic-rest',
              label: 'Take strategic breaks during shifts',
              description: 'Work smarter, not harder',
              meterChanges: { energy: 15, hourlyValue: 5 },
              storyResponse: 'You notice when to pause. Output stays high. Energy lasts. Senior pandas nod approvingly.',
              unlocks: ['energy-management'],
            },
          ],
        },
        {
          id: 'm3-skill',
          category: 'skill',
          title: 'Specialization Choice',
          description: 'A training opportunity appears. You can deepen one skill area.',
          options: [
            {
              id: 'deepen-inventory',
              label: 'Master inventory systems',
              description: 'Become the go-to expert',
              meterChanges: { replaceability: -25, hourlyValue: 15, optionality: -5 },
              storyResponse: 'You become irreplaceable for inventory. But your path narrows—this is your lane now.',
              unlocks: ['inventory-master'],
              requires: ['inventory-skill'],
            },
            {
              id: 'cross-train',
              label: 'Cross-train multiple areas',
              description: 'Broad flexibility',
              meterChanges: { replaceability: -15, hourlyValue: 10, optionality: 15 },
              storyResponse: 'You can fill gaps anywhere. When someone\'s sick, they call you first.',
              unlocks: ['flex-worker'],
            },
            {
              id: 'stay-generalist',
              label: 'Stay a generalist',
              description: 'Keep options open',
              meterChanges: { replaceability: 10, optionality: 5 },
              storyResponse: 'Flexibility preserved. But so is your replaceability. The choice haunts you later.',
            },
          ],
        },
        {
          id: 'm3-negotiation',
          category: 'negotiation',
          title: 'The Right Moment',
          description: 'You just saved the market from a major inventory error. The manager is grateful.',
          pandaDialogue: 'Now. This is the moment.',
          options: [
            {
              id: 'ask-with-evidence',
              label: 'Ask for a raise with specific examples',
              description: 'Show your receipts',
              meterChanges: { hourlyValue: 20, income: 15 },
              storyResponse: '"You\'re right," the manager says. "Let\'s talk numbers." Your hourly value jumps.',
              unlocks: ['first-raise'],
            },
            {
              id: 'ask-vague',
              label: 'Ask for a raise generally',
              description: 'Mention you\'ve been working hard',
              meterChanges: { hourlyValue: 5, income: 5 },
              storyResponse: '"We\'ll see at review time." Partial success. The evidence could have been stronger.',
            },
            {
              id: 'wait-review',
              label: 'Wait for the formal review',
              description: 'Play it safe',
              meterChanges: {},
              storyResponse: 'The moment fades. At review, they\'ve forgotten this incident. Standard increase only.',
            },
          ],
        },
        {
          id: 'm3-money',
          category: 'money',
          title: 'An Opportunity Appears',
          description: 'A certification course could unlock a coordinator role. It costs significant savings.',
          options: [
            {
              id: 'take-course',
              label: 'Invest in the certification',
              description: 'Spend savings on growth',
              meterChanges: { hourlyValue: 15, optionality: 20, replaceability: -20 },
              storyResponse: 'The course is intense. But a new path glows on the city map. Coordinator roles are now visible.',
              unlocks: ['coordinator-eligible'],
              requires: ['savings-started'],
            },
            {
              id: 'cant-afford',
              label: 'You haven\'t saved enough',
              description: 'The cost is too high',
              meterChanges: {},
              storyResponse: 'The opportunity passes. Another panda takes the course instead. You watch them advance.',
            },
            {
              id: 'partial-investment',
              label: 'Buy books instead of the course',
              description: 'Cheaper path to knowledge',
              meterChanges: { hourlyValue: 5, optionality: 5 },
              storyResponse: 'Self-study is slower. But progress is progress. The path stays dim but visible.',
              unlocks: ['self-study-path'],
            },
          ],
        },
      ],
      closingNarration: 'Halfway point. The city looks different from here. Some paths closed. Others opened. Your choices are compounding.',
      specialEvents: [
        {
          condition: (meters: GameMeters) => meters.energy < 30,
          event: 'You collapse after a shift. A senior panda helps you home. "Slow down," they whisper. "The race is long."',
        },
      ],
    },
    // MONTH 4
    {
      month: 4,
      title: 'Momentum or Stagnation',
      openingNarration: 'The new pandas call you "senior" now. Strange how time moves. But are you growing, or just aging in place?',
      decisions: [
        {
          id: 'm4-work',
          category: 'work',
          title: 'Shift Structure',
          description: 'You now have enough standing to influence your schedule.',
          options: [
            {
              id: 'maximize-hours',
              label: 'Stack high-pay shifts',
              description: 'Maximum income focus',
              meterChanges: { income: 20, energy: -25, optionality: -10 },
              storyResponse: 'The coins pile high. But every day blurs together. Growth stalls.',
            },
            {
              id: 'balanced-schedule',
              label: 'Balance work and recovery time',
              description: 'Sustainable rhythm',
              meterChanges: { income: 10, energy: 10, hourlyValue: 5 },
              storyResponse: 'Consistent performance. Consistent energy. The manager trusts your judgment.',
              unlocks: ['trusted-worker'],
            },
            {
              id: 'learning-schedule',
              label: 'Free up time for learning',
              description: 'Trade income for growth',
              meterChanges: { income: -5, hourlyValue: 15, optionality: 15 },
              storyResponse: 'Less money now. But skills compound. Future you will thank present you.',
              unlocks: ['growth-focused'],
            },
          ],
        },
        {
          id: 'm4-skill',
          category: 'skill',
          title: 'Leadership Moment',
          description: 'A new panda struggles. No one is helping them.',
          options: [
            {
              id: 'mentor-panda',
              label: 'Take time to mentor them',
              description: 'Invest in someone else',
              meterChanges: { replaceability: -15, optionality: 10, energy: -10 },
              storyResponse: 'They improve rapidly. The manager notices you developing others. Leadership quality noted.',
              unlocks: ['mentor-reputation'],
            },
            {
              id: 'point-to-resources',
              label: 'Point them to resources',
              description: 'Minimal involvement',
              meterChanges: {},
              storyResponse: 'They struggle longer. Eventually they figure it out. You stay focused on your own work.',
            },
            {
              id: 'ignore',
              label: 'Focus on your own tasks',
              description: 'Not your responsibility',
              meterChanges: { replaceability: 5 },
              storyResponse: 'You stay productive. But the team notices who helps and who doesn\'t.',
            },
          ],
        },
        {
          id: 'm4-negotiation',
          category: 'negotiation',
          title: 'A Competing Offer',
          description: 'Another market hears about your work. They reach out with an offer.',
          options: [
            {
              id: 'take-offer',
              label: 'Accept the new opportunity',
              description: 'Start fresh elsewhere',
              meterChanges: { income: 15, hourlyValue: 10, replaceability: 20 },
              storyResponse: 'New market, higher pay. But you\'re back to being unknown. Building from scratch again.',
              unlocks: ['market-switch'],
            },
            {
              id: 'leverage-offer',
              label: 'Use the offer to negotiate here',
              description: 'Show your market value',
              meterChanges: { hourlyValue: 15, income: 10 },
              storyResponse: '"We don\'t want to lose you." Your value here crystallizes. Pay adjusts upward.',
              unlocks: ['market-value-established'],
            },
            {
              id: 'decline-quietly',
              label: 'Decline without mentioning it',
              description: 'Stay loyal, stay quiet',
              meterChanges: {},
              storyResponse: 'Nothing changes. The opportunity fades. Maybe another will come.',
            },
          ],
        },
        {
          id: 'm4-money',
          category: 'money',
          title: 'Lifestyle Inflation',
          description: 'Your income has grown. Friends suggest moving to a nicer den.',
          options: [
            {
              id: 'upgrade-den',
              label: 'Move to the nicer den',
              description: 'You deserve comfort',
              meterChanges: { energy: 10, optionality: -20, income: -15 },
              storyResponse: 'The new den is beautiful. But your savings drain monthly. Runway shrinks.',
            },
            {
              id: 'stay-modest',
              label: 'Stay in your current den',
              description: 'Resist the upgrade',
              meterChanges: { optionality: 15 },
              storyResponse: 'Same old den. But your freedom grows. Options stay open.',
              unlocks: ['lifestyle-controlled'],
            },
            {
              id: 'small-upgrade',
              label: 'Make small improvements only',
              description: 'Balanced approach',
              meterChanges: { energy: 5, optionality: 5 },
              storyResponse: 'A better sleeping mat. A small plant. Comfort grows without consuming runway.',
            },
          ],
        },
      ],
      closingNarration: 'Month 4 ends. You see younger pandas making the choices you once made. Some will learn. Some won\'t.',
    },
    // MONTH 5
    {
      month: 5,
      title: 'The Long Game',
      openingNarration: 'The city map reveals new paths now. Some you unlocked. Some closed forever. The end approaches, but endings are really beginnings.',
      decisions: [
        {
          id: 'm5-work',
          category: 'work',
          title: 'A Difficult Assignment',
          description: 'A challenging project appears. High visibility, high risk.',
          options: [
            {
              id: 'take-project',
              label: 'Accept the challenge',
              description: 'Risk it for growth',
              meterChanges: { replaceability: -25, hourlyValue: 20, energy: -20 },
              storyResponse: 'Long nights. Deep focus. You deliver something impressive. The market remembers.',
              unlocks: ['star-performer'],
            },
            {
              id: 'partial-involvement',
              label: 'Offer to support, not lead',
              description: 'Lower risk, lower reward',
              meterChanges: { replaceability: -10, hourlyValue: 5 },
              storyResponse: 'You contribute without owning it. Safe, but the glory goes elsewhere.',
            },
            {
              id: 'decline-project',
              label: 'Decline the project',
              description: 'Protect your energy',
              meterChanges: { energy: 10, replaceability: 10 },
              storyResponse: 'Another panda takes it. They succeed. You wonder what might have been.',
            },
          ],
        },
        {
          id: 'm5-skill',
          category: 'skill',
          title: 'The Next Level',
          description: 'A coordinator position opens. Your skills determine eligibility.',
          options: [
            {
              id: 'apply-coordinator',
              label: 'Apply for coordinator',
              description: 'Step into leadership',
              meterChanges: { hourlyValue: 25, replaceability: -30, optionality: 10 },
              storyResponse: '"You\'ve earned this." The role is yours. Active income transforms into something bigger.',
              unlocks: ['coordinator-role'],
              requires: ['coordinator-eligible'],
            },
            {
              id: 'apply-unprepared',
              label: 'Apply anyway without certification',
              description: 'Long shot attempt',
              meterChanges: {},
              storyResponse: '"Not this time." The rejection stings. The prepared panda gets the role.',
            },
            {
              id: 'stay-current',
              label: 'Stay in current role',
              description: 'Known territory',
              meterChanges: { optionality: -10 },
              storyResponse: 'Comfort preserved. But the ceiling stays where it is.',
            },
          ],
        },
        {
          id: 'm5-negotiation',
          category: 'negotiation',
          title: 'Final Raise Window',
          description: 'Annual reviews approach. Your track record is visible.',
          options: [
            {
              id: 'strategic-ask',
              label: 'Present a case with full evidence',
              description: 'Document everything',
              meterChanges: { hourlyValue: 20, income: 15 },
              storyResponse: 'Your evidence speaks loudly. The raise is significant. You\'ve learned how this works.',
              unlocks: ['negotiation-master'],
            },
            {
              id: 'simple-ask',
              label: 'Ask for a standard increase',
              description: 'Don\'t rock the boat',
              meterChanges: { hourlyValue: 5, income: 5 },
              storyResponse: 'Standard increase granted. Nothing wrong with it. Nothing special either.',
            },
            {
              id: 'no-ask',
              label: 'Wait for them to offer',
              description: 'Passive approach',
              meterChanges: {},
              storyResponse: 'They offer the minimum. You accept. The system rewards those who ask.',
            },
          ],
        },
        {
          id: 'm5-money',
          category: 'money',
          title: 'A Side Path Appears',
          description: 'Cub pandas need tutoring. You could teach on evenings.',
          options: [
            {
              id: 'start-tutoring',
              label: 'Start a tutoring side gig',
              description: 'Second income stream',
              meterChanges: { income: 15, energy: -15, optionality: 20 },
              storyResponse: 'Teaching reinforces learning. Extra income flows. A new path illuminates on the city map.',
              unlocks: ['side-income'],
              requires: ['savings-started'],
            },
            {
              id: 'invest-instead',
              label: 'Invest savings in a bamboo fund',
              description: 'Let money work',
              meterChanges: { optionality: 15 },
              storyResponse: 'Your savings start growing on their own. Passive income seeds planted.',
              unlocks: ['investment-started'],
            },
            {
              id: 'focus-main',
              label: 'Focus on main job only',
              description: 'Don\'t spread thin',
              meterChanges: { energy: 10 },
              storyResponse: 'One focus. Full energy. Simple, but ceiling remains active-income-only.',
            },
          ],
        },
      ],
      closingNarration: 'One month remains. The choices compound visibly now. Your panda\'s trajectory is taking shape.',
      specialEvents: [
        {
          condition: (meters: GameMeters, unlocks: string[]) => unlocks.includes('coordinator-role'),
          event: 'Other pandas ask for your advice now. Strange to be on this side of the questions.',
        },
        {
          condition: (meters: GameMeters) => meters.optionality >= 70,
          event: 'The city map glows brightly. Paths everywhere. The freedom feels different from comfort.',
        },
      ],
    },
    // MONTH 6
    {
      month: 6,
      title: 'The Trajectory',
      openingNarration: 'Six months pass in Bamboo City. You\'re not the same panda who rolled their first crate. The question now isn\'t where you are. It\'s where you\'re heading.',
      decisions: [
        {
          id: 'm6-work',
          category: 'work',
          title: 'Final Work Pattern',
          description: 'How do you approach these last weeks?',
          options: [
            {
              id: 'strong-finish',
              label: 'Push for a strong finish',
              description: 'Leave nothing behind',
              meterChanges: { income: 15, hourlyValue: 10, energy: -20 },
              storyResponse: 'A sprint to the end. You prove something. But at what cost?',
            },
            {
              id: 'sustainable-close',
              label: 'Maintain sustainable pace',
              description: 'Finish as you mean to continue',
              meterChanges: { income: 10, energy: 5, hourlyValue: 5 },
              storyResponse: 'Consistent to the end. This is who you\'ve become.',
            },
            {
              id: 'coast-end',
              label: 'Coast to the finish',
              description: 'Preserve energy for what\'s next',
              meterChanges: { energy: 15, replaceability: 10 },
              storyResponse: 'You ease off. Energy preserved. But momentum slows.',
            },
          ],
        },
        {
          id: 'm6-skill',
          category: 'skill',
          title: 'Knowledge Transfer',
          description: 'A new panda asks to learn from you.',
          options: [
            {
              id: 'teach-deeply',
              label: 'Teach them everything',
              description: 'Pass on what you learned',
              meterChanges: { optionality: 15, replaceability: 5 },
              storyResponse: 'They absorb your knowledge. Part of you continues through them. Legacy planted.',
              unlocks: ['mentor-complete'],
            },
            {
              id: 'teach-basics',
              label: 'Share the basics only',
              description: 'Protect some knowledge',
              meterChanges: { replaceability: -5 },
              storyResponse: 'You help, but guard some secrets. Fair? Selfish? The line blurs.',
            },
            {
              id: 'no-time',
              label: 'Apologize, too busy',
              description: 'Focus on yourself',
              meterChanges: {},
              storyResponse: 'They find another mentor. Or struggle alone. You\'ll never know.',
            },
          ],
        },
        {
          id: 'm6-negotiation',
          category: 'negotiation',
          title: 'Future Conversation',
          description: 'The manager asks about your plans.',
          options: [
            {
              id: 'discuss-growth',
              label: 'Discuss growth opportunities',
              description: 'Signal you\'re staying and growing',
              meterChanges: { optionality: 10, hourlyValue: 10 },
              storyResponse: '"We\'d like you here long-term." The relationship solidifies. Doors stay open.',
              unlocks: ['career-path-set'],
            },
            {
              id: 'stay-vague',
              label: 'Stay vague about plans',
              description: 'Keep options open',
              meterChanges: { optionality: 5 },
              storyResponse: 'The manager nods, uncertain. Flexibility preserved, but commitment unclear.',
            },
            {
              id: 'signal-leaving',
              label: 'Mention you\'re exploring options',
              description: 'Honest about uncertainty',
              meterChanges: { optionality: 15 },
              storyResponse: 'The manager respects honesty. They share connections. New paths appear.',
              unlocks: ['network-expanded'],
            },
          ],
        },
        {
          id: 'm6-money',
          category: 'money',
          title: 'Final Allocation',
          description: 'Your savings sit before you. One last decision.',
          options: [
            {
              id: 'reinvest-fully',
              label: 'Reinvest everything for growth',
              description: 'Maximum optionality',
              meterChanges: { optionality: 25 },
              storyResponse: 'No comfort upgrade. Pure runway. The future is wide open.',
              unlocks: ['maximum-runway'],
            },
            {
              id: 'celebrate-modestly',
              label: 'Celebrate with a modest reward',
              description: 'You earned some comfort',
              meterChanges: { energy: 10, optionality: 10 },
              storyResponse: 'A nice meal. A small treat. Balance achieved.',
            },
            {
              id: 'spend-freely',
              label: 'Finally spend freely',
              description: 'Enjoy what you built',
              meterChanges: { energy: 20, optionality: -15 },
              storyResponse: 'The comfort is real. But runway shrinks. Was it worth it?',
            },
          ],
        },
      ],
      closingNarration: 'Month 6 ends. The sun sets over Bamboo City. Time stops for a moment of reflection.',
    },
  ],
  endings: [
    {
      id: 'momentum',
      title: 'The Momentum Builder',
      trajectory: 'momentum',
      description: 'Your panda leaves Month 6 with velocity.',
      futureSnapshot: 'Your panda has momentum. Multiple paths glow ahead. Skills compound. Options multiply. The next chapter will be chosen, not forced.',
      conditions: (meters: GameMeters, unlocks: string[]) =>
        meters.optionality >= 60 &&
        meters.replaceability <= 40 &&
        meters.energy >= 40 &&
        meters.hourlyValue >= 50,
    },
    {
      id: 'growing',
      title: 'The Rising Star',
      trajectory: 'growing',
      description: 'Your panda is on an upward trajectory.',
      futureSnapshot: 'Your panda has lower income now but three open paths ahead. Growth is visible. The ceiling moved up. What comes next will build on what came before.',
      conditions: (meters: GameMeters, unlocks: string[]) =>
        meters.hourlyValue >= 50 &&
        meters.replaceability <= 50 &&
        meters.optionality >= 40,
    },
    {
      id: 'balanced',
      title: 'The Steady Panda',
      trajectory: 'balanced',
      description: 'Your panda found a sustainable rhythm.',
      futureSnapshot: 'Your panda earns steadily with energy to spare. Not explosive growth, but consistent progress. Sustainability is its own achievement.',
      conditions: (meters: GameMeters) =>
        meters.energy >= 50 &&
        meters.income >= 50 &&
        meters.hourlyValue >= 35,
    },
    {
      id: 'stuck',
      title: 'The Ceiling',
      trajectory: 'stuck',
      description: 'Your panda hit the invisible ceiling.',
      futureSnapshot: 'Your panda earns steadily but feels capped. The same tasks, the same pay, the same ceiling. Escape requires different choices next time.',
      conditions: (meters: GameMeters) =>
        meters.replaceability >= 60 &&
        meters.optionality <= 40,
    },
    {
      id: 'burnout',
      title: 'The Exhausted Worker',
      trajectory: 'burnout',
      description: 'Your panda paid the price of pushing too hard.',
      futureSnapshot: 'Your panda is tired, paid, and stuck. The money came at a cost. Recovery is possible, but it will take time. Energy is the engine.',
      conditions: (meters: GameMeters) =>
        meters.energy <= 30,
    },
  ],
};
